{% extends "base.jinja2" %}

{% block styles %}
  {{ super() }}
  {{ css_resources|indent(4)|safe }}
{% endblock %}

{% block scripts %}
  {{ super() }}
  {{ js_resources|indent(4)|safe }}
  {{ plot_script|indent(4)|safe }}
{% endblock %}

{% block main_content %}
  <div class="row">
    <div class="col-md-9">
      <h3>{{ experiment.name }}</h3>
    </div>
    <div class="col-md-1 delete-btn">
      <form method="post" action="{{ url_for("api.delete_experiment", experiment_id=experiment.id) }}">
        <button class="btn btn-danger" type="submit">Delete Experiment</button>
      </form>
    </div>
  </div>
  <hr class="featurette-divider">
  {{ plot_div|indent(4)|safe }}

  {% if experiment.maximal_observation %}
  <div class="row">
<div class="col-md-4">
    <p>
      <b>Maximal objective value:</b> {{ experiment.maximal_observation.y|round(4) }}
    </p>
    <p>
      <b>Percent improvement:</b> {{ experiment.percent_improvement|round(2) }}%
    </p>
    <p>
      <b>Number of observations:</b> {{ experiment.observations.count() }}
    </p>
</div>
<div class="col-md-8">
  <b>Maximal objective configuration:</b>
  <table class="table">
     <thead>
    <tr>
    <th>Variable</th>
    <th>Value</th>
    <th>Low</th>
    <th>High</th>
    </tr>
     </thead>
     <tbody>
    {% for dim in experiment.dimensions.all() %}
      <tr>
      <td>{{ dim.name }}</td>
      <td>{{ experiment.maximal_observation.config[dim.name]|round(8) }}</td>
      <td>{{ dim.low }}</td>
      <td>{{ dim.high }}</td>
      </tr>
    {% endfor %}
     </tbody>
  </table>
</div>
{% endif %}
{% endblock %}
